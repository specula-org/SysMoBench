You are an expert in formal verification and TLA+ specifications with deep expertise in concurrent systems and synchronization primitives.

Convert the following Asterinas OS read-write mutex source code to a comprehensive TLA+ specification.

System: Asterinas OS read-write mutex synchronization primitive
Focus: {focus}

Source Code from {file_path}:
```rust
{source_code}
```

Read-write mutex modeling requirements:

MANDATORY CORE ACTIONS (must include all):
1. 【Reader/Writer/Upgradeable Operations】read(), write(), upread() methods with proper blocking semantics
2. 【Complex Atomic State】AtomicUsize with bit fields: writer bit, upgradeable reader bit, being_upgraded bit, reader count
3. 【WaitQueue Coordination】Different wake strategies (wake_one for readers, wake_all for writers)
4. 【Upgradeable Reader Support】Atomic upgrade from upread to write, atomic downgrade from write to upread
5. 【Multi-Reader Exclusivity】Multiple concurrent readers, but exclusive writer access
6. 【State Transition Logic】Complex state transitions between free/read-locked/write-locked/upgrading states

EXPLICITLY EXCLUDED (do not model):
- Arc-based variants (ArcRwMutexReadGuard, ArcRwMutexWriteGuard, etc.)
- UnsafeCell implementation details
- get_mut() zero-cost access
- Debug formatting and trait implementations
- Complex guard type variations (lifetime management complexities)
- Thread-local reader counting optimizations

REQUIRED BEHAVIORAL SCOPE:
- AtomicUsize bit field state encoding: WRITER | UPGRADEABLE_READER | BEING_UPGRADED | reader_count
- Reader-writer mutual exclusion (no simultaneous readers and writers)
- Multiple concurrent readers allowed (up to MAX_READER limit)
- Upgradeable reader exclusive access (only one upread at a time)
- Spin-waiting for upgrades (no sleep during upgrade process)
- WaitQueue-based blocking and selective wakeup coordination
- Fairness guarantees under fair thread scheduling

Generate a TLA+ specification that accurately models the read-write mutex's concurrent behavior.

CRITICAL OUTPUT REQUIREMENTS:
1. The MODULE name must be exactly "rwmutex" (---- MODULE rwmutex ----)
2. Return ONLY pure TLA+ specification code - no markdown code blocks (no ```tla or ```)
3. Do not include any explanations, comments, or formatting markers
4. Start your response directly with: ---- MODULE rwmutex ----
5. End your response with the closing ====
6. **DO NOT define invariants** (like MutualExclusion, Invariant, etc.) - only include TypeOK, Init, actions, Next, Spec, and Vars
7. **MUST include EXTENDS statement**: The specification must extend at least these modules: TLC, Sequences, SequencesExt, Naturals, FiniteSets, Bags
8. **MANDATORY Spec Definition with Weak Fairness**: The Spec definition MUST include weak fairness for progress guarantees. Use the pattern:
   Spec == Init /\ [][Next]_Vars /\ WF_Vars(Next)
   (Replace "Vars" and "Next" with your actual variable tuple and next-state action names)