// Simple spinlock in PAT/CSP
var lock_held = false;

Process(i) = acquire.i -> release.i -> Process(i);

acquire.i = [lock_held == false] lock_held := true -> Skip;
release.i = [lock_held == true] lock_held := false -> Skip;

System = Process(0) ||| Process(1);

#assert System deadlockfree;
